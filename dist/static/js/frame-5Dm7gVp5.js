import{d as I,U as k,a as s,u as f,fM as x,n as R,m as S,A as T,B,k as L,e as P,g as b,x as D,_ as E}from"./index-CrpkX2s8.js";const $=["element-loading-text"],y=["src"],C=I({name:"LayFrame",__name:"frame",props:{frameInfo:{}},setup(h){var v,_;const t=h,{t:p}=k(),n=s(!0),r=x(),c=s(""),m=s(null),o=s(null);(v=f(r.meta))!=null&&v.frameSrc&&(c.value=(_=f(r.meta))==null?void 0:_.frameSrc);function d(){o.value!==null&&(clearTimeout(o.value),o.value=null)}function i(){n.value=!1,d()}function g(){D(()=>{const e=f(m);if(!e)return;const a=e;a.attachEvent?a.attachEvent("onload",i):e.onload=i})}let u=!1;return R(()=>r.fullPath,e=>{var a,l;if(r.name==="Redirect"&&((a=t.frameInfo)!=null&&a.fullPath)&&e.includes(t.frameInfo.fullPath)){u=!0,n.value=!0;return}if(((l=t.frameInfo)==null?void 0:l.fullPath)===e&&u){n.value=!0,d();const w=new URL(t.frameInfo.frameSrc,window.location.origin).search?"&":"?";c.value=`${t.frameInfo.frameSrc}${w}t=${Date.now()}`,o.value=window.setTimeout(()=>{n.value&&i()},1500),u=!1}},{immediate:!0}),S(()=>{g()}),(e,a)=>{const l=B("loading");return T((P(),L("div",{class:"frame","element-loading-text":f(p)("status.pureLoad")},[b("iframe",{ref_key:"frameRef",ref:m,src:c.value,class:"frame-iframe"},null,8,y)],8,$)),[[l,n.value]])}}}),U=E(C,[["__scopeId","data-v-d92281cb"]]);export{U as default};
