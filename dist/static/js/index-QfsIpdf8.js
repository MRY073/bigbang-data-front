var T=(w,a,c)=>new Promise((_,s)=>{var p=l=>{try{n(c.next(l))}catch(x){s(x)}},u=l=>{try{n(c.throw(l))}catch(x){s(x)}},n=l=>l.done?_(l.value):Promise.resolve(l.value).then(p,u);n((c=c.apply(w,a)).next())});import{d as P,a as f,k as h,e as m,v as A,u as g,a0 as C,g as o,F as Y,l as j,f as e,t as y,h as i,w as r,j as R,J as M,_ as N,B as G,A as q,b as B,i as D,gg as Z,a3 as ee,Y as te,a5 as O,r as W,kw as J,g7 as ne,m as le,gr as oe,kx as ae,k6 as se,a1 as re,fQ as ie,X as ce}from"./index-CrpkX2s8.js";import{R as E}from"./index-Bv5qH4O6.js";import{f as ue}from"./mock-D_U1MxO-.js";import{R as me}from"./index-30PTH0ot.js";import{u as pe}from"./useDataThemeChange-ECV4FZ36.js";import{l as de,P as fe,_ as _e}from"./SidebarTopCollapse.vue_vue_type_script_setup_true_lang-CNn1Dlvg.js";import"./app-C-mi67Mp.js";import"./epTheme-bGaN8RA1.js";const ve={class:"flex items-center"},ge={class:"flex-1"},he=P({name:"AccountManagement",__name:"AccountManagement",setup(w){const a=f([{title:"账户密码",illustrate:"当前密码强度：强",button:"修改"},{title:"密保手机",illustrate:"已经绑定手机：158****6789",button:"修改"},{title:"密保问题",illustrate:"未设置密保问题，密保问题可有效保护账户安全",button:"修改"},{title:"备用邮箱",illustrate:"已绑定邮箱：pure***@163.com",button:"修改"}]);function c(_){M("请根据具体业务自行实现",{type:"success"})}return(_,s)=>{const p=i("el-text"),u=i("el-button"),n=i("el-divider");return m(),h("div",{class:A(["min-w-[180px]",g(C)()?"max-w-[100%]":"max-w-[70%]"])},[s[0]||(s[0]=o("h3",{class:"my-8!"},"账户管理",-1)),(m(!0),h(Y,null,j(a.value,(l,x)=>(m(),h("div",{key:x},[o("div",ve,[o("div",ge,[o("p",null,y(l.title),1),e(p,{class:"mx-1",type:"info"},{default:r(()=>[R(y(l.illustrate),1)]),_:2},1024)]),e(u,{type:"primary",text:"",onClick:b=>c()},{default:r(()=>[R(y(l.button),1)]),_:2},1032,["onClick"])]),e(n)]))),128))],2)}}}),xe=N(he,[["__scopeId","data-v-70354685"]]),we={class:"flex items-center"},ye={class:"flex-1"},be={class:"wp-4"},ke=P({name:"Preferences",__name:"Preferences",setup(w){const a=f([{title:"账户密码",illustrate:"其他用户的消息将以站内信的形式通知",checked:!0},{title:"系统消息",illustrate:"系统消息将以站内信的形式通知",checked:!0},{title:"待办任务",illustrate:"待办任务将以站内信的形式通知",checked:!0}]);function c(_,s){M(`${s.title}设置成功`,{type:"success"})}return(_,s)=>{const p=i("el-text"),u=i("el-switch"),n=i("el-divider");return m(),h("div",{class:A(["min-w-[180px]",g(C)()?"max-w-[100%]":"max-w-[70%]"])},[s[0]||(s[0]=o("h3",{class:"my-8!"},"偏好设置",-1)),(m(!0),h(Y,null,j(a.value,(l,x)=>(m(),h("div",{key:x},[o("div",we,[o("div",ye,[o("p",null,y(l.title),1),o("p",be,[e(p,{class:"mx-1",type:"info"},{default:r(()=>[R(y(l.illustrate),1)]),_:2},1024)])]),e(u,{modelValue:l.checked,"onUpdate:modelValue":b=>l.checked=b,"inline-prompt":"","active-text":"是","inactive-text":"否",onChange:b=>c(b,l)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),e(n)]))),128))],2)}}}),Ce=N(ke,[["__scopeId","data-v-c4e52a32"]]),Ve={"element-loading-background":"transparent"},$e={class:"w-[18vw]"},ze={class:"mt-1 text-center"},Ie={class:"flex flex-wrap justify-center items-center text-center"},Re={key:1,class:"mt-1"},Me=P({name:"ReCropperPreview",__name:"index",props:{imgSrc:String},emits:["cropper"],setup(w,{expose:a,emit:c}){const _=c,s=f(),p=f(),u=f(),n=f(!1),l=f("");function x({base64:V,blob:$,info:z}){s.value=z,l.value=V,_("cropper",{base64:V,blob:$,info:z})}function b(){p.value.hide()}return a({hidePopover:b}),(V,$)=>{const z=i("el-image"),S=i("el-popover"),d=G("loading");return q((m(),h("div",Ve,[e(S,{ref_key:"popoverRef",ref:p,visible:n.value,placement:"right",width:"18vw"},{reference:r(()=>[o("div",$e,[e(g(me),{ref_key:"refCropper",ref:u,src:w.imgSrc,circled:"",onCropper:x,onReadied:$[0]||($[0]=t=>n.value=!0)},null,8,["src"]),q(o("p",ze," 温馨提示：右键上方裁剪区可开启功能菜单 ",512),[[ee,n.value]])])]),default:r(()=>[o("div",Ie,[l.value?(m(),B(z,{key:0,src:l.value,"preview-src-list":Array.of(l.value),fit:"cover"},null,8,["src","preview-src-list"])):D("",!0),s.value?(m(),h("div",Re,[o("p",null," 图像大小："+y(parseInt(s.value.width))+" × "+y(parseInt(s.value.height))+"像素 ",1),o("p",null," 文件大小："+y(g(Z)(s.value.size))+"（"+y(s.value.size)+" 字节） ",1)])):D("",!0)])]),_:1},8,["visible"])])),[[d,!n.value]])}}}),Pe=te(Me),Se={viewBox:"0 0 24 24",width:"1em",height:"1em"};function He(w,a){return m(),h("svg",Se,[...a[0]||(a[0]=[o("path",{fill:"currentColor",d:"M3 19h18v2H3zM13 5.828V17h-2V5.828L4.929 11.9l-1.414-1.414L12 2l8.485 8.485l-1.414 1.415z"},null,-1)])])}const Le=O({name:"ri-upload-line",render:He}),Be={class:"dialog-footer"},Ae=P({name:"Profile",__name:"Profile",setup(w){const a=f(""),c=f(),_=f(),s=f(),p=f(!1),u=f(),n=W({avatar:"",nickname:"",email:"",phone:"",description:""}),l=W({nickname:[{required:!0,message:"昵称必填",trigger:"blur"}]});function x(d,t){const v=[{value:"@qq.com"},{value:"@126.com"},{value:"@163.com"}];let U=[],I=[];v.map(H=>I.push({value:d.split("@")[0]+H.value})),U=d?I.filter(H=>H.value.toLowerCase().indexOf(d.toLowerCase())===0):I,t(U)}const b=d=>{const t=new FileReader;t.onload=v=>{a.value=v.target.result,p.value=!0},t.readAsDataURL(d.raw)},V=()=>{_.value.hidePopover(),s.value.clearFiles(),p.value=!1},$=({blob:d})=>c.value=d,z=()=>{const d=ne({files:new File([c.value],"avatar")});ue(d).then(({success:t,data:v})=>{t?(M("更新头像成功",{type:"success"}),V()):M("更新头像失败")}).catch(t=>{M(`提交异常 ${t}`,{type:"error"})})},S=d=>T(null,null,function*(){yield d.validate((t,v)=>{t&&M("更新信息成功",{type:"success"})})});return J().then(d=>{Object.assign(n,d.data)}),(d,t)=>{const v=i("el-avatar"),U=i("IconifyIconOffline"),I=i("el-button"),H=i("el-upload"),L=i("el-form-item"),F=i("el-input"),K=i("el-autocomplete"),Q=i("el-form"),X=i("el-dialog");return m(),h("div",{class:A(["min-w-[180px]",g(C)()?"max-w-[100%]":"max-w-[70%]"])},[t[10]||(t[10]=o("h3",{class:"my-8!"},"个人信息",-1)),e(Q,{ref_key:"userInfoFormRef",ref:u,"label-position":"top",rules:l,model:n},{default:r(()=>[e(L,{label:"头像"},{default:r(()=>[e(v,{size:80,src:n.avatar},null,8,["src"]),e(H,{ref_key:"uploadRef",ref:s,accept:"image/*",action:"#",limit:1,"auto-upload":!1,"show-file-list":!1,"on-change":b},{default:r(()=>[e(I,{plain:"",class:"ml-4!"},{default:r(()=>[e(U,{icon:g(Le)},null,8,["icon"]),t[6]||(t[6]=o("span",{class:"ml-2"},"更新头像",-1))]),_:1})]),_:1},512)]),_:1}),e(L,{label:"昵称",prop:"nickname"},{default:r(()=>[e(F,{modelValue:n.nickname,"onUpdate:modelValue":t[0]||(t[0]=k=>n.nickname=k),placeholder:"请输入昵称"},null,8,["modelValue"])]),_:1}),e(L,{label:"邮箱",prop:"email"},{default:r(()=>[e(K,{modelValue:n.email,"onUpdate:modelValue":t[1]||(t[1]=k=>n.email=k),"fetch-suggestions":x,"trigger-on-focus":!1,placeholder:"请输入邮箱",clearable:"",class:"w-full"},null,8,["modelValue"])]),_:1}),e(L,{label:"联系电话"},{default:r(()=>[e(F,{modelValue:n.phone,"onUpdate:modelValue":t[2]||(t[2]=k=>n.phone=k),placeholder:"请输入联系电话",clearable:""},null,8,["modelValue"])]),_:1}),e(L,{label:"简介"},{default:r(()=>[e(F,{modelValue:n.description,"onUpdate:modelValue":t[3]||(t[3]=k=>n.description=k),placeholder:"请输入简介",type:"textarea",autosize:{minRows:6,maxRows:8},maxlength:"56","show-word-limit":""},null,8,["modelValue"])]),_:1}),e(I,{type:"primary",onClick:t[4]||(t[4]=k=>S(u.value))},{default:r(()=>[...t[7]||(t[7]=[R(" 更新信息 ",-1)])]),_:1})]),_:1},8,["rules","model"]),e(X,{modelValue:p.value,"onUpdate:modelValue":t[5]||(t[5]=k=>p.value=k),width:"40%",title:"编辑头像","destroy-on-close":"",closeOnClickModal:!1,"before-close":V,fullscreen:g(C)()},{footer:r(()=>[o("div",Be,[e(I,{bg:"",text:"",onClick:V},{default:r(()=>[...t[8]||(t[8]=[R("取消",-1)])]),_:1}),e(I,{bg:"",text:"",type:"primary",onClick:z},{default:r(()=>[...t[9]||(t[9]=[R(" 确定 ",-1)])]),_:1})])]),default:r(()=>[e(g(Pe),{ref_key:"cropRef",ref:_,imgSrc:a.value,onCropper:$},null,8,["imgSrc"])]),_:1},8,["modelValue","fullscreen"])],2)}}}),Ue=P({name:"SecurityLog",__name:"SecurityLog",setup(w){const a=f(!0),c=f([]),_=W({total:0,pageSize:10,currentPage:1,background:!0,layout:"prev, pager, next"}),s=[{label:"详情",prop:"summary",minWidth:140},{label:"IP 地址",prop:"ip",minWidth:100},{label:"地点",prop:"address",minWidth:140},{label:"操作系统",prop:"system",minWidth:100},{label:"浏览器类型",prop:"browser",minWidth:100},{label:"时间",prop:"operatingTime",minWidth:180,formatter:({operatingTime:u})=>oe(u).format("YYYY-MM-DD HH:mm:ss")}];function p(){return T(this,null,function*(){a.value=!0;const{data:u}=yield ae();c.value=u.list,_.total=u.total,_.pageSize=u.pageSize,_.currentPage=u.currentPage,setTimeout(()=>{a.value=!1},200)})}return le(()=>{p()}),(u,n)=>{const l=i("pure-table");return m(),h("div",{class:A(["min-w-[180px]",g(C)()?"max-w-[100%]":"max-w-[70%]"])},[n[0]||(n[0]=o("h3",{class:"my-8!"},"安全日志",-1)),e(l,{"row-key":"id","table-layout":"auto",loading:a.value,data:c.value,columns:s,pagination:_},null,8,["loading","data","pagination"])],2)}}}),De={viewBox:"0 0 24 24",width:"1em",height:"1em"};function Oe(w,a){return m(),h("svg",De,[...a[0]||(a[0]=[o("path",{fill:"currentColor",d:"M20 22h-2v-2a3 3 0 0 0-3-3H9a3 3 0 0 0-3 3v2H4v-2a5 5 0 0 1 5-5h6a5 5 0 0 1 5 5zm-8-9a6 6 0 1 1 0-12a6 6 0 0 1 0 12m0-2a4 4 0 1 0 0-8a4 4 0 0 0 0 8"},null,-1)])])}const Fe=O({name:"ri-user-3-line",render:Oe}),Te={viewBox:"0 0 24 24",width:"1em",height:"1em"};function We(w,a){return m(),h("svg",Te,[...a[0]||(a[0]=[o("path",{fill:"currentColor",d:"M21 3a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm-1 8H4v8h16zm0-6H4v4h16zm-9 1v2H9V6zM7 6v2H5V6z"},null,-1)])])}const Ye=O({name:"ri-window-line",render:We}),je={viewBox:"0 0 24 24",width:"1em",height:"1em"};function Ne(w,a){return m(),h("svg",je,[...a[0]||(a[0]=[o("path",{fill:"currentColor",d:"M21.008 3c.548 0 .992.445.992.993v16.014a1 1 0 0 1-.992.993H2.992A.993.993 0 0 1 2 20.007V3.993A1 1 0 0 1 2.992 3zM20 5H4v14h16zm-2 10v2H6v-2zm-6-8v6H6V7zm6 4v2h-4v-2zm-8-2H8v2h2zm8-2v2h-4V7z"},null,-1)])])}const qe=O({name:"ri-profile-line",render:Ne}),Ee={class:"h-full flex items-center px-[var(--el-menu-base-level-padding)]"},Je={class:"flex items-center ml-8 mt-4 mb-4"},Ke={class:"ml-4 flex flex-col max-w-[130px]"},Qe={class:"flex items-center z-10"},Xe=P({name:"AccountSettings",__name:"index",setup(w){const a=ie(),c=f(!C()),{$storage:_}=se();re(()=>{var n;pe().dataThemeChange((n=_.layout)==null?void 0:n.overallStyle)});const s=f({avatar:"",username:"",nickname:""}),p=[{key:"profile",label:"个人信息",icon:Fe,component:Ae},{key:"preferences",label:"偏好设置",icon:fe,component:Ce},{key:"securityLog",label:"安全日志",icon:Ye,component:Ue},{key:"accountManagement",label:"账户管理",icon:qe,component:xe}],u=f("profile");return J().then(n=>{s.value=n.data}),(n,l)=>{const x=i("IconifyIconOffline"),b=i("el-avatar"),V=i("el-icon"),$=i("el-menu-item"),z=i("el-menu"),S=i("el-aside"),d=i("el-main"),t=i("el-container");return m(),B(t,{class:"h-full"},{default:r(()=>[c.value?(m(),B(S,{key:0,class:"pure-account-settings overflow-hidden px-2 dark:bg-(--el-bg-color)! border-r-[1px] border-[var(--pure-border-color)]",width:g(C)()?"180px":"240px"},{default:r(()=>[e(z,{"default-active":u.value,class:"pure-account-settings-menu"},{default:r(()=>[o("div",{class:"h-[50px]! text-[var(--pure-theme-menu-text)] cursor-pointer text-sm transition-all duration-300 ease-in-out hover:scale-105 will-change-transform transform-gpu origin-center hover:text-base! hover:text-[var(--pure-theme-menu-title-hover)]!",onClick:l[0]||(l[0]=v=>g(a).go(-1))},[o("div",Ee,[e(x,{icon:g(de)},null,8,["icon"]),l[2]||(l[2]=o("span",{class:"ml-2"},"返回",-1))])]),o("div",Je,[e(b,{size:48,src:s.value.avatar},null,8,["src"]),o("div",Ke,[e(g(E),{class:"font-bold self-baseline!"},{default:r(()=>[R(y(s.value.nickname),1)]),_:1}),e(g(E),{class:"self-baseline!",type:"info"},{default:r(()=>[R(y(s.value.username),1)]),_:1})])]),(m(),h(Y,null,j(p,v=>e($,{key:v.key,index:v.key,onClick:()=>{u.value=v.key,g(C)()&&(c.value=!c.value)}},{default:r(()=>[o("div",Qe,[e(V,null,{default:r(()=>[e(x,{icon:v.icon},null,8,["icon"])]),_:2},1024),o("span",null,y(v.label),1)])]),_:2},1032,["index","onClick"])),64))]),_:1},8,["default-active"])]),_:1},8,["width"])):D("",!0),e(d,null,{default:r(()=>[g(C)()?(m(),B(_e,{key:0,class:"px-0","is-active":c.value,onToggleClick:l[1]||(l[1]=v=>c.value=!c.value)},null,8,["is-active"])):D("",!0),(m(),B(ce(p.find(v=>v.key===u.value).component),{class:A([!g(C)()&&"ml-[120px]"])},null,8,["class"]))]),_:1})]),_:1})}}}),rt=N(Xe,[["__scopeId","data-v-d00f6515"]]);export{rt as default};
