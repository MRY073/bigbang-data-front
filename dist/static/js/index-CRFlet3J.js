import{a5 as L,k as v,e as u,g as s,d as q,a as j,r as T,b as C,h as r,w as i,f as o,j as a,u as _,g7 as G,J as y,p as R,g8 as Q,g9 as K,A,i as F,a3 as W,t as O,v as X,q as Z,T as ee,fQ as te,E as se,G as oe,B as le,_ as ne}from"./index-CrpkX2s8.js";import{S as ae}from"./sortable.esm-CqAbI0f6.js";import{f as ie}from"./mock-D_U1MxO-.js";const re="/static/jpg/1-CNu9tHLV.jpg",de="/static/jpg/2-Dn7NyzRJ.jpg",pe="/static/jpg/3-BNVYzMvF.jpg",ue={viewBox:"0 0 24 24",width:"26",height:"26"};function me(b,t){return u(),v("svg",ue,[...t[0]||(t[0]=[s("path",{fill:"currentColor",d:"M4 19h16v-7h2v8a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-8h2zm9-10v7h-2V9H6l6-6l6 6z"},null,-1)])])}const ce=L({name:"ri-upload-2-line",render:me}),fe={class:"el-upload__text"},_e=q({__name:"form",setup(b){const t=j(),M=j(),d=T({fileList:[],date:""}),g=c=>{c&&c.validate(l=>{if(l){const x=G({files:d.fileList.map(m=>({raw:m.raw})),date:d.date});ie(x).then(({success:m})=>{m?y("提交成功",{type:"success"}):y("提交失败")}).catch(m=>{y(`提交异常 ${m}`,{type:"error"})})}else return!1})},B=c=>{c&&c.resetFields()};return(c,l)=>{const x=r("el-upload"),m=r("el-form-item"),U=r("el-date-picker"),z=r("el-button"),D=r("el-form");return u(),C(D,{ref_key:"formRef",ref:t,model:d,"label-width":"82px"},{default:i(()=>[o(m,{label:"附件",prop:"fileList",rules:[{required:!0,message:"附件不能为空"}]},{default:i(()=>[o(x,{ref_key:"uploadRef",ref:M,"file-list":d.fileList,"onUpdate:fileList":l[0]||(l[0]=f=>d.fileList=f),drag:"",multiple:"",action:"#",class:"w-[200px]!","auto-upload":!1},{default:i(()=>[s("div",fe,[o(_(ce),{class:"m-auto mb-2"}),l[4]||(l[4]=a(" 可点击或拖拽上传 ",-1))])]),_:1},8,["file-list"])]),_:1}),o(m,{label:"日期",prop:"date",rules:[{required:!0,message:"日期不能为空"}]},{default:i(()=>[o(U,{modelValue:d.date,"onUpdate:modelValue":l[1]||(l[1]=f=>d.date=f),type:"datetime",class:"w-[200px]!",placeholder:"请选择日期时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),o(m,null,{default:i(()=>[o(z,{type:"primary",text:"",bg:"",onClick:l[2]||(l[2]=f=>g(t.value))},{default:i(()=>[...l[5]||(l[5]=[a(" 提交 ",-1)])]),_:1}),o(z,{text:"",bg:"",onClick:l[3]||(l[3]=f=>B(t.value))},{default:i(()=>[...l[6]||(l[6]=[a("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])}}}),ve={viewBox:"0 0 1024 1024",width:"30",height:"30"};function ge(b,t){return u(),v("svg",ve,[...t[0]||(t[0]=[s("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"},null,-1)])])}const xe=L({name:"ep-plus",render:ge}),ye={viewBox:"0 0 24 24",width:"1em",height:"1em"};function be(b,t){return u(),v("svg",ye,[...t[0]||(t[0]=[s("path",{fill:"currentColor",d:"M12 3c5.392 0 9.878 3.88 10.819 9c-.94 5.12-5.427 9-10.819 9s-9.878-3.88-10.818-9C2.122 6.88 6.608 3 12 3m0 16a9.005 9.005 0 0 0 8.778-7a9.005 9.005 0 0 0-17.555 0A9.005 9.005 0 0 0 12 19m0-2.5a4.5 4.5 0 1 1 0-9a4.5 4.5 0 0 1 0 9m0-2a2.5 2.5 0 1 0 0-5a2.5 2.5 0 0 0 0 5"},null,-1)])])}const he=L({name:"ri-eye-line",render:be}),we={viewBox:"0 0 24 24",width:"1em",height:"1em"};function ke(b,t){return u(),v("svg",we,[...t[0]||(t[0]=[s("path",{fill:"currentColor",d:"M17 6h5v2h-2v13a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V8H2V6h5V3a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1zm1 2H6v12h12zM9 4v2h6V4z"},null,-1)])])}const $e=L({name:"ri-delete-bin-7-line",render:ke}),Ce={class:"card-header"},je={key:0,class:"mt-[35%]! m-auto"},ze=["onMouseenter"],Ve=["src"],Ie=["onClick"],Le=["onClick"],Me={title:"移除",class:"hover:text-[var(--el-color-danger)]"},Be={key:0,effect:"dark",round:"",size:"large",type:"info",class:"img-name"},Ue={class:"text-[#fff] dark:text-black"},De={class:"flex justify-between"},He={class:"flex flex-wrap"},Ne={class:"text-[red] text-[12px] flex flex-auto items-center justify-end"},Se=q({name:"PureUpload",__name:"index",setup(b){const t=j([]),M=te(),d=j(0),g=j(!1),B=R(()=>Q(t.value,"url")),c=R(()=>K(t.value,"name","size")),l=n=>new URL(Object.assign({"./imgs/1.jpg":re,"./imgs/2.jpg":de,"./imgs/3.jpg":pe})[`./imgs/${n}.jpg`],import.meta.url).href,x=Array.from({length:3}).map((n,e)=>l(e+1)),m=n=>{if(!["image/jpeg","image/png","image/gif"].includes(n.type))return y("只能上传图片"),!1;if(n.size/1024/1024>2)return y("单个图片大小不能超过2MB"),!1},U=()=>{y("最多上传3张图片，请先删除在上传")},z=n=>{t.value.splice(t.value.indexOf(n),1)},D=n=>{d.value=t.value.findIndex(e=>e.uid===n.uid),g.value=!0},f=()=>document.querySelectorAll("#pure-upload-item"),J=n=>{var V,w,I;const e="el-upload-list",h=t.value.findIndex(k=>k.uid===n);(I=(w=(V=f())==null?void 0:V[h])==null?void 0:w.classList)==null||I.add(`${e}__item-actions`);const H=document.querySelector(`.${e}`);ae.create(H,{handle:`.${e}__item`,onEnd:({newIndex:k,oldIndex:$})=>{const N=t.value[$];t.value.splice($,1),t.value.splice(k,0,N),f().forEach(S=>{S.classList.remove(`${e}__item-actions`)})}})},Y=()=>{[{name:"巴旦木.jpeg",type:"img"},{name:"恭喜发财.png",type:"img"},{name:"可爱动物.gif",type:"gif"},{name:"pure-upload.csv",type:"other"},{name:"pure-upload.txt",type:"other"}].forEach(n=>{se.get(`https://xiaoxian521.github.io/hyperlink/${n.type}/${n.name}`,{responseType:"blob"}).then(({data:e})=>{oe(e,n.name)})})};return(n,e)=>{const h=r("el-link"),H=r("el-button"),V=r("el-progress"),w=r("IconifyIconOffline"),I=r("el-upload"),k=r("el-image-viewer"),$=r("el-divider"),N=r("el-image"),S=r("el-card"),P=le("tippy");return u(),C(S,{shadow:"never"},{header:i(()=>[s("div",Ce,[A((u(),C(h,{href:"https://element-plus.org/zh-CN/component/upload.html",target:"_blank",style:{"font-size":"16px","font-weight":"800"}},{default:i(()=>[...e[4]||(e[4]=[a(" 文件上传 ",-1)])]),_:1})),[[P,{content:"点击查看详细文档"}]])]),o(h,{class:"mt-2",href:"https://github.com/pure-admin/vue-pure-admin/blob/main/src/views/components/upload",target:"_blank"},{default:i(()=>[...e[5]||(e[5]=[a(" 代码位置 src/views/components/upload ",-1)])]),_:1})]),default:i(()=>[o(H,{class:"mb-4!",text:"",bg:"",onClick:Y},{default:i(()=>[...e[6]||(e[6]=[a(" 点击下载安全文件进行上传测试 ",-1)])]),_:1}),e[15]||(e[15]=s("p",{class:"mb-4!"},[a(" 综合示例"),s("span",{class:"text-[14px]"},[a(" （ "),s("span",{class:"text-[red]"},"自动上传"),a(" 、拖拽上传、拖拽排序、设置请求头、上传进度、大图预览、多选文件、最大文件数量、文件类型限制、文件大小限制、删除文件） ")])],-1)),A(s("p",{class:"mb-4!"},O(c.value),513),[[W,t.value.length>0]]),o(I,{"file-list":t.value,"onUpdate:fileList":e[0]||(e[0]=p=>t.value=p),drag:"",multiple:"",class:"pure-upload","list-type":"picture-card",accept:"image/jpeg,image/png,image/gif",action:"https://run.mocky.io/v3/3aa761d7-b0b3-4a03-96b3-6168d4f7467b",limit:3,headers:{Authorization:"eyJhbGciOiJIUzUxMiJ9.admin"},"on-exceed":U,"before-upload":m},{file:i(({file:p})=>[p.status=="ready"||p.status=="uploading"?(u(),v("div",je,[e[7]||(e[7]=s("p",{class:"font-medium"},"文件上传中",-1)),o(V,{class:"mt-2!","stroke-width":2,"text-inside":!0,"show-text":!1,percentage:p.percentage},null,8,["percentage"])])):(u(),v("div",{key:1,onMouseenter:Z(E=>J(p.uid),["stop"])},[s("img",{class:"el-upload-list__item-thumbnail select-none",src:p.url},null,8,Ve),s("span",{id:"pure-upload-item",class:X(["el-upload-list__item-actions",t.value.length>1&&"cursor-move!"])},[s("span",{title:"查看",class:"hover:text-primary",onClick:E=>D(p)},[o(w,{icon:_(he),class:"hover:scale-125 duration-100"},null,8,["icon"])],8,Ie),s("span",{class:"el-upload-list__item-delete",onClick:E=>z(p)},[s("span",Me,[o(w,{icon:_($e),class:"hover:scale-125 duration-100"},null,8,["icon"])])],8,Le)],2)],40,ze))]),default:i(()=>[o(_(xe),{class:"m-auto mt-4"})]),_:1},8,["file-list"]),g.value?(u(),C(k,{key:0,initialIndex:d.value,"url-list":B.value,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,onClose:e[1]||(e[1]=p=>g.value=!1),onSwitch:e[2]||(e[2]=p=>d.value=p)},null,8,["initialIndex","url-list"])):F("",!0),(u(),C(ee,{to:"body"},[t.value[d.value]&&g.value?(u(),v("div",Be,[s("p",Ue,O(t.value[d.value].name),1)])):F("",!0)])),e[16]||(e[16]=s("p",{class:"el-upload__tip"}," 可拖拽上传最多3张单个不超过2MB且格式为jpeg/png/gif的图片 ",-1)),o($),e[17]||(e[17]=s("p",{class:"my-4!"},[a(" 结合表单校验进行"),s("span",{class:"text-[red]"},"手动上传"),s("span",{class:"text-[14px]"}," （可先打开浏览器控制台找到Network，然后填写表单内容后点击点提交观察请求变化） ")],-1)),s("div",De,[o(_e),s("div",null,[e[8]||(e[8]=s("p",{class:"text-center"},"上传接口相关截图",-1)),o(N,{class:"w-[200px] rounded-md",src:_(x)[0],"preview-src-list":_(x),fit:"cover"},null,8,["src","preview-src-list"])])]),o($),s("div",He,[s("p",null,[e[9]||(e[9]=a(" 裁剪、上传头像请参考 ",-1)),s("span",{class:"font-bold text-[18x] cursor-pointer hover:text-[red]",onClick:e[3]||(e[3]=p=>_(M).push({name:"SystemUser"}))}," 系统管理-用户管理 "),e[10]||(e[10]=a(" 表格操作栏中的上传头像功能 ",-1))]),s("p",Ne,[e[12]||(e[12]=a(" 免责声明：上传接口使用免费开源的 ",-1)),o(h,{href:"https://designer.mocky.io/",target:"_blank",style:{"font-size":"16px","font-weight":"800"}},{default:i(()=>[...e[11]||(e[11]=[a("  Mocky  ",-1)])]),_:1}),e[13]||(e[13]=s("span",{class:"font-bold text-[18x]"}," 请不要上传重要信息 ",-1)),e[14]||(e[14]=a("，如果造成任何损失，我们概不负责 ",-1))])])]),_:1})}}}),Fe=ne(Se,[["__scopeId","data-v-b883a8a8"]]);export{Fe as default};
