var qe=Object.defineProperty,xe=Object.defineProperties;var De=Object.getOwnPropertyDescriptors;var ie=Object.getOwnPropertySymbols;var Me=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable;var re=t=>{throw TypeError(t)};var j=(t,e,s)=>e in t?qe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,M=(t,e)=>{for(var s in e||(e={}))Me.call(e,s)&&j(t,s,e[s]);if(ie)for(var s of ie(e))Re.call(e,s)&&j(t,s,e[s]);return t},ne=(t,e)=>xe(t,De(e));var y=(t,e,s)=>j(t,typeof e!="symbol"?e+"":e,s),oe=(t,e,s)=>e.has(t)||re("Cannot "+s);var c=(t,e,s)=>(oe(t,e,"read from private field"),s?s.call(t):e.get(t)),O=(t,e,s)=>e.has(t)?re("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s);var o=(t,e,s)=>(oe(t,e,"access private method"),s);var p=(t,e,s)=>new Promise((r,n)=>{var u=h=>{try{a(s.next(h))}catch(f){n(f)}},l=h=>{try{a(s.throw(h))}catch(f){n(f)}},a=h=>h.done?r(h.value):Promise.resolve(h.value).then(u,l);a((s=s.apply(t,e)).next())});import{d as me,a as $e,m as Qe,f as H,b as Be,e as Fe,w as W,u as He,g as ue,j as ze,h as ae}from"./index-CrpkX2s8.js";const ye=t=>Array.isArray(t),be=t=>ye(t)?t:[t];let Ue=function(t){let e=function(d){return be(d).forEach(b=>{var D;return m.set(Symbol((D=b.char)==null?void 0:D.innerText),n(M({},b)))}),this},s=()=>h().filter(d=>d.typeable),r=function(d,b){let D=[...m.keys()];m.set(D[d],n(b))},n=d=>(d.shouldPauseCursor=function(){return!!(this.typeable||this.cursorable||this.deletable)},d),u=function(){m.forEach(d=>delete d.done)},l=function(){m=new Map,e(t)},a=()=>m,h=()=>Array.from(m.values()),f=d=>m.delete(d),q=()=>{const d=[];for(let[,b]of a())b.done||d.push(b);return d},x=(d=!1)=>d?h():h().filter(b=>!b.done),P=(d,b=!1)=>b?m.delete(d):m.get(d).done=!0,m=new Map;return e(t),{add:e,set:r,wipe:l,done:P,reset:u,destroy:f,getItems:x,getQueue:a,getTypeable:s,getPendingQueueItems:q}};const ge="data-typeit-id",C="ti-cursor",Ve="END",je={started:!1,completed:!1,frozen:!1,destroyed:!1},E={breakLines:!0,cursor:{autoPause:!0,autoPauseDelay:500,animation:{frames:[0,0,1].map(t=>({opacity:t})),options:{iterations:1/0,easing:"steps(2, start)",fill:"forwards"}}},cursorChar:"|",cursorSpeed:1e3,deleteSpeed:null,html:!0,lifeLike:!0,loop:!1,loopDelay:750,nextStringDelay:750,speed:100,startDelay:250,startDelete:!1,strings:[],waitUntilVisible:!1,beforeString:()=>{},afterString:()=>{},beforeStep:()=>{},afterStep:()=>{},afterComplete:()=>{}},Oe=`[${ge}]:before {content: '.'; display: inline-block; width: 0; visibility: hidden;}`,$=t=>document.createElement(t),ee=t=>document.createTextNode(t),we=(t,e="")=>{let s=$("style");s.id=e,s.appendChild(ee(t)),document.head.appendChild(s)},le=t=>(ye(t)||(t=[t/2,t/2]),t),he=(t,e)=>Math.abs(Math.random()*(t+e-(t-e))+(t-e));let de=t=>t/2;function We(t){let{speed:e,deleteSpeed:s,lifeLike:r}=t;return s=s!==null?s:e/3,r?[he(e,de(e)),he(s,de(s))]:[e,s]}const Te=t=>Array.from(t);let te=t=>([...t.childNodes].forEach(e=>{if(e.nodeValue){[...e.nodeValue].forEach(s=>{e.parentNode.insertBefore(ee(s),e)}),e.remove();return}te(e)}),t);const Ce=t=>{let e=document.implementation.createHTMLDocument();return e.body.innerHTML=t,te(e.body)};function Pe(t,e=!1,s=!1){let r=t.querySelector(`.${C}`),n=document.createTreeWalker(t,NodeFilter.SHOW_ALL,{acceptNode:a=>{var h,f;if(r&&s){if((h=a.classList)!=null&&h.contains(C))return NodeFilter.FILTER_ACCEPT;if(r.contains(a))return NodeFilter.FILTER_REJECT}return(f=a.classList)!=null&&f.contains(C)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),u,l=[];for(;u=n.nextNode();)u.originalParent||(u.originalParent=u.parentNode),l.push(u);return e?l.reverse():l}function Je(t){return Pe(Ce(t))}function Xe(t,e=!0){return e?Je(t):Te(t).map(ee)}const Ge=({index:t,newIndex:e,queueItems:s,cleanUp:r})=>{for(let n=t+1;n<e+1;n++)r(s[n][0])},Se=t=>Number.isInteger(t),ce=({queueItems:t,selector:e,cursorPosition:s,to:r})=>{if(Se(e))return e*-1;let n=new RegExp(Ve,"i").test(r),u=e?[...t].reverse().findIndex(({char:a})=>{let h=a.parentElement,f=h.matches(e);return n&&f?!0:f&&h.firstChild.isSameNode(a)}):-1;u<0&&(u=n?0:t.length-1);let l=n?0:1;return u-s+l},Ke=t=>(t.forEach(clearTimeout),[]),R=(t,e)=>new Array(e).fill(t);let z=t=>new Promise(e=>{requestAnimationFrame(()=>p(null,null,function*(){e(yield t())}))}),Ee=t=>t==null?void 0:t.getAnimations().find(e=>e.id===t.dataset.tiAnimationId),Ie=({cursor:t,frames:e,options:s})=>{let r=t.animate(e,s);return r.pause(),r.id=t.dataset.tiAnimationId,z(()=>{z(()=>{r.play()})}),r},Ye=({cursor:t,options:e,cursorOptions:s})=>{if(!t||!s)return;let r=Ee(t),n;r&&(e.delay=r.effect.getComputedTiming().delay,n=r.currentTime,r.cancel());let u=Ie({cursor:t,frames:s.animation.frames,options:e});return n&&(u.currentTime=n),u},fe=t=>{var e;return(e=t.func)==null?void 0:e.call(null)},Ze=u=>p(null,[u],function*({index:t,queueItems:e,wait:s,cursor:r,cursorOptions:n}){let l=e[t][1],a=[],h=t,f=l,q=()=>f&&!f.delay,x=l.shouldPauseCursor()&&n.autoPause;for(;q();)a.push(f),q()&&h++,f=e[h]?e[h][1]:null;if(a.length)return yield z(()=>p(null,null,function*(){for(let d of a)yield fe(d)})),h-1;let P=Ee(r),m;return P&&(m=ne(M({},P.effect.getComputedTiming()),{delay:x?n.autoPauseDelay:0})),yield s(()=>p(null,null,function*(){P&&x&&P.cancel(),yield z(()=>{fe(l)})}),l.delay),yield Ye({cursor:r,options:m,cursorOptions:n}),t});const et=(t,e)=>{new IntersectionObserver((r,n)=>{r.forEach(u=>{u.isIntersecting&&(e(),n.unobserve(t))})},{threshold:1}).observe(t)},tt=()=>Math.random().toString().substring(2,9),U=t=>"value"in t;let st=t=>U(t)?Te(t.value):Pe(t,!0).filter(e=>!(e.childNodes.length>0)),S=t=>typeof t=="function"?t():t,se=(t,e=document,s=!1)=>e[`querySelector${s?"All":""}`](t),it=t=>/body/i.test(t==null?void 0:t.tagName),rt=(t,e)=>{if(U(t)){t.value=`${t.value}${e.textContent}`;return}e.innerHTML="";let s=it(e.originalParent)?t:e.originalParent||t,r=se("."+C,s)||null;r&&r.parentElement!==s&&(s=r.parentElement),s.insertBefore(e,r)};const nt=t=>/<(.+)>(.*?)<\/(.+)>/.test(t.outerHTML),I=(t,e)=>Object.assign({},t,e);let ot=t=>{var e,s,r;if(typeof t=="object"){let n={},{frames:u,options:l}=E.cursor.animation;return n.animation=t.animation||{},n.animation.frames=((e=t.animation)==null?void 0:e.frames)||u,n.animation.options=I(l,((s=t.animation)==null?void 0:s.options)||{}),n.autoPause=(r=t.autoPause)!=null?r:E.cursor.autoPause,n.autoPauseDelay=t.autoPauseDelay||E.cursor.autoPauseDelay,n}return t===!0?E.cursor:t};const ut=(t,e)=>{if(!t)return;let s=t.parentNode;(s.childNodes.length>1||s.isSameNode(e)?t:s).remove()},at=(t,e,s)=>{let r=e[s-1],n=se(`.${C}`,t);t=(r==null?void 0:r.parentNode)||t,t.insertBefore(n,r||null)};function lt(t){return typeof t=="string"?se(t):t}let ht={"font-family":"","font-weight":"","font-size":"","font-style":"","line-height":"",color:"",transform:"translateX(-.125em)"},dt=(t,e)=>{let r=`${`[${ge}='${t}']`} .${C}`,n=getComputedStyle(e),u=Object.entries(ht).reduce((l,[a,h])=>`${l} ${a}: var(--ti-cursor-${a}, ${h||n[a]});`,"");we(`${r} { display: inline-block; width: 0; ${u} }`,t)};function ct(t){return t.replace(/<!--(.+?)-->/g,"").trim().split(/<br(?:\s*?)(?:\/)?>/)}let ft=(t,e,s)=>Math.min(Math.max(e+t,0),s.length),pt=(t,e,s)=>new Promise(r=>{let n=()=>p(null,null,function*(){yield t(),r()});s.push(setTimeout(n,e||0))});var i,Ne,N,J,ve,X,G,K,Q,g,ke,v,k,Ae,V,Le,_e,Y,B,A,F,T,L,_,Z,w,pe;let mt=(pe=class{constructor(e,s={}){O(this,i);y(this,"element");y(this,"timeouts");y(this,"cursorPosition");y(this,"predictedCursorPosition");y(this,"statuses",{started:!1,completed:!1,frozen:!1,destroyed:!1,firing:!1});y(this,"opts");y(this,"id");y(this,"queue");y(this,"cursor");y(this,"flushCallback",null);y(this,"unfreeze",()=>{});y(this,"is",function(e){return this.statuses[e]});O(this,V,e=>{var s;this.opts.cursor=ot((s=e.cursor)!=null?s:E.cursor),this.opts.strings=o(this,i,Le).call(this,be(this.opts.strings)),this.opts=I(this.opts,{html:!c(this,i,_)&&this.opts.html,nextStringDelay:le(this.opts.nextStringDelay),loopDelay:le(this.opts.loopDelay)})});this.opts=I(E,s),this.element=lt(e),this.timeouts=[],this.cursorPosition=0,this.unfreeze=()=>{},this.predictedCursorPosition=null,this.statuses=I({},je),this.id=tt(),this.queue=Ue([{delay:this.opts.startDelay}]),c(this,V).call(this,s),this.cursor=o(this,i,_e).call(this),this.element.dataset.typeitId=this.id,we(Oe),this.opts.strings.length&&o(this,i,Ae).call(this)}go(){return this.statuses.started?this:(o(this,i,K).call(this),this.opts.waitUntilVisible?(et(this.element,o(this,i,N).bind(this)),this):(o(this,i,N).call(this),this))}destroy(e=!0){this.timeouts=Ke(this.timeouts),S(e)&&this.cursor&&o(this,i,F).call(this,this.cursor),this.statuses.destroyed=!0}reset(e){!this.is("destroyed")&&this.destroy(),e?(this.queue.wipe(),e(this)):this.queue.reset(),this.cursorPosition=0;for(let s in this.statuses)this.statuses[s]=!1;return this.element[o(this,i,Q).call(this)?"value":"innerHTML"]="",this}type(e,s={}){e=S(e);let{instant:r}=s,n=o(this,i,v).call(this,s),l=Xe(e,this.opts.html).map(h=>({func:()=>o(this,i,B).call(this,h),char:h,delay:r||nt(h)?0:o(this,i,T).call(this),typeable:h.nodeType===Node.TEXT_NODE})),a=[n[0],{func:()=>p(this,null,function*(){return yield this.opts.beforeString(e,this)})},...l,{func:()=>p(this,null,function*(){return yield this.opts.afterString(e,this)})},n[1]];return o(this,i,g).call(this,a,s)}break(e={}){return o(this,i,g).call(this,{func:()=>o(this,i,B).call(this,$("BR")),typeable:!0},e)}move(e,s={}){e=S(e);let r=o(this,i,v).call(this,s),{instant:n,to:u}=s,l=ce({queueItems:this.queue.getTypeable(),selector:e===null?"":e,to:u,cursorPosition:c(this,i,L)}),a=l<0?-1:1;return this.predictedCursorPosition=c(this,i,L)+l,o(this,i,g).call(this,[r[0],...R({func:()=>o(this,i,J).call(this,a),delay:n?0:o(this,i,T).call(this),cursorable:!0},Math.abs(l)),r[1]],s)}exec(e,s={}){let r=o(this,i,v).call(this,s);return o(this,i,g).call(this,[r[0],{func:()=>e(this)},r[1]],s)}options(e,s={}){return e=S(e),o(this,i,k).call(this,e),o(this,i,g).call(this,{},s)}pause(e,s={}){return o(this,i,g).call(this,{delay:S(e)},s)}delete(e=null,s={}){e=S(e);let r=o(this,i,v).call(this,s),n=e,{instant:u,to:l}=s,a=this.queue.getTypeable(),h=n===null?a.length:Se(n)?n:ce({queueItems:a,selector:n,cursorPosition:c(this,i,L),to:l});return o(this,i,g).call(this,[r[0],...R({func:o(this,i,A).bind(this),delay:u?0:o(this,i,T).call(this,1),deletable:!0},h),r[1]],s)}freeze(){this.statuses.frozen=!0}flush(e=null){return this.flushCallback=e||this.flushCallback,this.statuses.firing?this:(o(this,i,K).call(this),o(this,i,N).call(this,!1).then(()=>{if(this.queue.getPendingQueueItems().length>0)return this.flush();this.flushCallback(),this.flushCallback=null}),this)}getQueue(){return this.queue}getOptions(){return this.opts}updateOptions(e){return o(this,i,k).call(this,e)}getElement(){return this.element}empty(e={}){return o(this,i,g).call(this,{func:o(this,i,Ne).bind(this)},e)}},i=new WeakSet,Ne=function(){return p(this,null,function*(){if(o(this,i,Q).call(this)){this.element.value="";return}c(this,i,w).forEach(o(this,i,F).bind(this))})},N=function(e=!0){return p(this,null,function*(){this.statuses.started=!0,this.statuses.firing=!0;let s=r=>{this.queue.done(r,!e)};try{let r=[...this.queue.getQueue()];for(let u=0;u<r.length;u++){let[l,a]=r[u];if(!a.done){if(!a.deletable||a.deletable&&c(this,i,w).length){let h=yield o(this,i,X).call(this,u,r);Ge({index:u,newIndex:h,queueItems:r,cleanUp:s}),u=h}s(l)}}if(!e)return this.statuses.firing=!1,this;if(this.statuses.completed=!0,this.statuses.firing=!1,yield this.opts.afterComplete(this),!this.opts.loop)throw"";let n=this.opts.loopDelay;o(this,i,G).call(this,()=>p(this,null,function*(){yield o(this,i,ve).call(this,n[0]),o(this,i,N).call(this)}),n[1])}catch(r){}return this.statuses.firing=!1,this})},J=function(e){return p(this,null,function*(){this.cursorPosition=ft(e,this.cursorPosition,c(this,i,w)),at(this.element,c(this,i,w),this.cursorPosition)})},ve=function(e){return p(this,null,function*(){let s=c(this,i,L);s&&(yield o(this,i,J).call(this,{value:s}));let r=c(this,i,w).map(n=>[Symbol(),{func:o(this,i,A).bind(this),delay:o(this,i,T).call(this,1),deletable:!0,shouldPauseCursor:()=>!0}]);for(let n=0;n<r.length;n++)yield o(this,i,X).call(this,n,r);this.queue.reset(),this.queue.set(0,{delay:e})})},X=function(e,s){return Ze({index:e,queueItems:s,wait:o(this,i,G).bind(this),cursor:this.cursor,cursorOptions:this.opts.cursor})},G=function(e,s,r=!1){return p(this,null,function*(){this.statuses.frozen&&(yield new Promise(n=>{this.unfreeze=()=>{this.statuses.frozen=!1,n()}})),r||(yield this.opts.beforeStep(this)),yield pt(e,s,this.timeouts),r||(yield this.opts.afterStep(this))})},K=function(){return p(this,null,function*(){if(!o(this,i,Q).call(this)&&this.cursor&&this.element.appendChild(this.cursor),c(this,i,Z)){dt(this.id,this.element),this.cursor.dataset.tiAnimationId=this.id;let{animation:e}=this.opts.cursor,{frames:s,options:r}=e;Ie({frames:s,cursor:this.cursor,options:M({duration:this.opts.cursorSpeed},r)})}})},Q=function(){return U(this.element)},g=function(e,s){return this.queue.add(e),o(this,i,ke).call(this,s),this},ke=function(e={}){let s=e.delay;s&&this.queue.add({delay:s})},v=function(e={}){return[{func:()=>o(this,i,k).call(this,e)},{func:()=>o(this,i,k).call(this,this.opts)}]},k=function(e){return p(this,null,function*(){this.opts=I(this.opts,e)})},Ae=function(){let e=this.opts.strings.filter(s=>!!s);e.forEach((s,r)=>{if(this.type(s),r+1===e.length)return;let n=this.opts.breakLines?[{func:()=>o(this,i,B).call(this,$("BR")),typeable:!0}]:R({func:o(this,i,A).bind(this),delay:o(this,i,T).call(this,1)},this.queue.getTypeable().length);o(this,i,Y).call(this,n)})},V=new WeakMap,Le=function(e){let s=this.element.innerHTML;return s?(this.element.innerHTML="",this.opts.startDelete?(this.element.innerHTML=s,te(this.element),o(this,i,Y).call(this,R({func:o(this,i,A).bind(this),delay:o(this,i,T).call(this,1),deletable:!0},c(this,i,w).length)),e):ct(s).concat(e)):e},_e=function(){if(c(this,i,_))return null;let e=$("span");return e.className=C,c(this,i,Z)?(e.innerHTML=Ce(this.opts.cursorChar).innerHTML,e):(e.style.visibility="hidden",e)},Y=function(e){let s=this.opts.nextStringDelay;this.queue.add([{delay:s[0]},...e,{delay:s[1]}])},B=function(e){rt(this.element,e)},A=function(){c(this,i,w).length&&(c(this,i,_)?this.element.value=this.element.value.slice(0,-1):o(this,i,F).call(this,c(this,i,w)[this.cursorPosition]))},F=function(e){ut(e,this.element)},T=function(e=0){return We(this.opts)[e]},L=function(){var e;return(e=this.predictedCursorPosition)!=null?e:this.cursorPosition},_=function(){return U(this.element)},Z=function(){return!!this.opts.cursor&&!c(this,i,_)},w=function(){return st(this.element)},pe);const yt=me({name:"TypeIt",props:{options:{type:Object,default:()=>({})}},setup(t,{slots:e,expose:s}){function r(l){throw new TypeError(l)}function n(){return navigator.language}const u=$e(null);return Qe(()=>{const l=u.value.querySelector(".type-it");if(!l){const h=n()==="zh-CN"?"请确保有且只有一个具有class属性为 'type-it' 的元素":"Please make sure that there is only one element with a Class attribute with 'type-it'";r(h)}const a=new mt(l,t.options).go();s({typeIt:a})}),()=>{var l,a;return H("div",{ref:u},[(a=(l=e.default)==null?void 0:l.call(e))!=null?a:H("span",{class:"type-it"},null)])}}}),bt=yt,gt={class:"card-header"},Pt=me({name:"Typeit",__name:"typeit",setup(t){const e={strings:["test1","test2","test3"]};return(s,r)=>{const n=ae("el-link"),u=ae("el-card");return Fe(),Be(u,{shadow:"never"},{header:W(()=>[ue("div",gt,[r[1]||(r[1]=ue("p",{class:"font-medium"},"打字机组件",-1)),H(n,{class:"mt-2",href:"https://github.com/pure-admin/vue-pure-admin/blob/main/src/views/able/typeit.vue",target:"_blank"},{default:W(()=>[...r[0]||(r[0]=[ze(" 代码位置 src/views/able/typeit.vue ",-1)])]),_:1})])]),default:W(()=>[H(He(bt),{options:e})]),_:1})}}});export{Pt as default};
