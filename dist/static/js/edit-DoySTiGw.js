var T=Object.defineProperty,N=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var S=(e,l,c)=>l in e?T(e,l,{enumerable:!0,configurable:!0,writable:!0,value:c}):e[l]=c,w=(e,l)=>{for(var c in l||(l={}))I.call(l,c)&&S(e,c,l[c]);if(R)for(var c of R(l))W.call(l,c)&&S(e,c,l[c]);return e},D=(e,l)=>N(e,A(l));import{a as k,f as n,h as r,ai as H,k as h,e as _,g as b,a5 as B,d as $,w as p,t as M,u as d,j as y,_ as U,ac as J,km as P,F as g,b as V,p as j,A as O,a3 as X,l as q,i as G,X as K,B as Q}from"./index-CrpkX2s8.js";import{u as F}from"./hooks-B7bPvCbq.js";import{C as Z}from"./check-Po1m2IGw.js";const ee=[{id:1,name:"Tom",sex:0,hobby:2,date:"2024-03-17"},{id:2,name:"Jack",sex:0,hobby:1,date:"2024-03-18"},{id:3,name:"Lily",sex:1,hobby:1,date:"2024-03-19"},{id:4,name:"Mia",sex:1,hobby:3,date:"2024-03-20"}],Y=[{value:0,label:"上午写代码"},{value:1,label:"下午写代码"},{value:2,label:"晚上写代码"},{value:3,label:"凌晨休息了"}],le=[{id:1,name:"Tom",address:"home"},{id:2,name:"Jack",address:"office"},{id:3,name:"Lily",address:"library"},{id:4,name:"Mia",address:"playground"}];function te(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!H(e)}function ne(){const e=k([]),l=[{label:"姓名",prop:"name",cellRenderer:({row:o})=>n(r("el-input"),{modelValue:o.name,"onUpdate:modelValue":i=>o.name=i},null)},{label:"性别",prop:"sex",cellRenderer:({row:o})=>n(r("el-switch"),{modelValue:o.sex,"onUpdate:modelValue":i=>o.sex=i,"inline-prompt":!0,"active-value":0,"inactive-value":1,"active-text":"男","inactive-text":"女"},null)},{label:"爱好",prop:"hobby",cellRenderer:({row:o})=>{let i;return n(r("el-select"),{modelValue:o.hobby,"onUpdate:modelValue":t=>o.hobby=t,clearable:!0,placeholder:"请选择爱好"},te(i=Y.map(t=>n(r("el-option"),{key:t.value,label:t.label,value:t.value},null)))?i:{default:()=>[i]})}},{label:"日期",prop:"date",cellRenderer:({row:o})=>n(r("el-date-picker"),{modelValue:o.date,"onUpdate:modelValue":i=>o.date=i,type:"date",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD",placeholder:"请选择日期"},null),minWidth:110},{label:"操作",fixed:"right",width:90,slot:"operation"}];function c(){e.value.push({id:e.value.length+1,name:"",sex:0,hobby:"",date:""})}function m(o){const i=e.value.indexOf(o);i!==-1&&e.value.splice(i,1)}return{columns:l,dataList:e,onAdd:c,onDel:m}}const ae={xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",class:"empty-icon",viewBox:"0 0 1024 1024"};function oe(e,l){return _(),h("svg",ae,[...l[0]||(l[0]=[b("path",{d:"M855.6 427.2H168.5c-12.7 0-24.4 6.9-30.6 18L4.4 684.7C1.5 689.9 0 695.8 0 701.8v287.1c0 19.4 15.7 35.1 35.1 35.1H989c19.4 0 35.1-15.7 35.1-35.1V701.8c0-6-1.5-11.8-4.4-17.1L886.2 445.2c-6.2-11.1-17.9-18-30.6-18M673.4 695.6c-16.5 0-30.8 11.5-34.3 27.7-12.7 58.5-64.8 102.3-127.2 102.3s-114.5-43.8-127.2-102.3c-3.5-16.1-17.8-27.7-34.3-27.7H119c-26.4 0-43.3-28-31.1-51.4l81.7-155.8c6.1-11.6 18-18.8 31.1-18.8h622.4c13 0 25 7.2 31.1 18.8l81.7 155.8c12.2 23.4-4.7 51.4-31.1 51.4zm146.5-486.1c-1-1.8-2.1-3.7-3.2-5.5-9.8-16.6-31.1-22.2-47.8-12.6L648.5 261c-17 9.8-22.7 31.6-12.6 48.4.9 1.4 1.7 2.9 2.5 4.4 9.5 17 31.2 22.8 48 13L807 257.3c16.7-9.7 22.4-31 12.9-47.8m-444.5 51.6L255 191.6c-16.7-9.6-38-4-47.8 12.6-1.1 1.8-2.1 3.6-3.2 5.5-9.5 16.8-3.8 38.1 12.9 47.8L337.3 327c16.9 9.7 38.6 4 48-13.1.8-1.5 1.7-2.9 2.5-4.4 10.2-16.8 4.5-38.6-12.4-48.4M512 239.3h2.5c19.5.3 35.5-15.5 35.5-35.1v-139c0-19.3-15.6-34.9-34.8-35.1h-6.4C489.6 30.3 474 46 474 65.2v139c0 19.5 15.9 35.4 35.5 35.1z"},null,-1)])])}const se={render:oe},re={viewBox:"0 0 1024 1024",width:"1em",height:"1em"};function ce(e,l){return _(),h("svg",re,[...l[0]||(l[0]=[b("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"},null,-1)])])}const ue=B({name:"ep-plus",render:ce}),ie={viewBox:"0 0 1024 1024",width:"1em",height:"1em"};function de(e,l){return _(),h("svg",ie,[...l[0]||(l[0]=[b("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"},null,-1)])])}const pe=B({name:"ep-delete",render:de}),me={class:"flex"},ve={class:"w-[400px]"},_e=$({__name:"index",setup(e){const{columns:l,dataList:c,onAdd:m,onDel:o}=ne();return(i,t)=>{const v=r("el-scrollbar"),u=r("el-button"),s=r("pure-table");return _(),h("div",me,[n(v,{height:"540px"},{default:p(()=>[b("code",null,[b("pre",ve," "+M(d(c)),1)])]),_:1}),n(s,{"row-key":"id","align-whole":"center","header-cell-style":{background:"var(--el-fill-color-light)",color:"var(--el-text-color-primary)"},data:d(c),columns:d(l)},{empty:p(()=>[n(d(se),{fill:"var(--el-svg-monochrome-grey)",class:"m-auto"})]),append:p(()=>[n(u,{plain:"",class:"w-full my-2!",icon:d(F)(d(ue)),onClick:d(m)},{default:p(()=>[...t[0]||(t[0]=[y(" 添加一行数据 ",-1)])]),_:1},8,["icon","onClick"])]),operation:p(({row:a})=>[n(u,{class:"reset-margin",link:"",type:"primary",icon:d(F)(d(pe)),onClick:f=>d(o)(a)},null,8,["icon","onClick"])]),_:1},8,["data","columns"])])}}}),be=U(_e,[["__scopeId","data-v-036f1fc5"]]);function fe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!H(e)}function he(){const e=k({}),l=k(J(ee,!0)),c=[{label:"姓名",prop:"name",cellRenderer:({row:t,index:v})=>{var u;return n(g,null,[(u=e.value[v])!=null&&u.editable?n(r("el-input"),{modelValue:t.name,"onUpdate:modelValue":s=>t.name=s},null):n("p",null,[t.name])])}},{label:"性别",prop:"sex",cellRenderer:({row:t,index:v})=>{var u;return n(g,null,[(u=e.value[v])!=null&&u.editable?n(r("el-switch"),{modelValue:t.sex,"onUpdate:modelValue":s=>t.sex=s,"inline-prompt":!0,"active-value":0,"inactive-value":1,"active-text":"男","inactive-text":"女"},null):n("p",null,[t.sex===0?"男":"女"])])}},{label:"爱好",prop:"hobby",cellRenderer:({row:t,index:v})=>{var s;let u;return n(g,null,[(s=e.value[v])!=null&&s.editable?n(r("el-select"),{modelValue:t.hobby,"onUpdate:modelValue":a=>t.hobby=a,clearable:!0,placeholder:"请选择爱好"},fe(u=Y.map(a=>n(r("el-option"),{key:a.value,label:a.label,value:a.value},null)))?u:{default:()=>[u]}):n(r("el-tag"),{type:"primary"},{default:()=>{var a;return[(a=Y.filter(f=>f.value==t.hobby)[0])==null?void 0:a.label]}})])}},{label:"日期",prop:"date",cellRenderer:({row:t,index:v})=>{var u;return n(g,null,[(u=e.value[v])!=null&&u.editable?n(r("el-date-picker"),{modelValue:t.date,"onUpdate:modelValue":s=>t.date=s,type:"date",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD",placeholder:"请选择日期"},null):n("p",null,[t.date])])},minWidth:110},{label:"操作",fixed:"right",slot:"operation"}];function m(t,v){e.value[v]=Object.assign(D(w({},t),{editable:!0}))}function o(t){e.value[t].editable=!1}function i(t){e.value[t].editable=!1,l.value[t]=P(e.value[t],"editable")}return{editMap:e,columns:c,dataList:l,onEdit:m,onSave:o,onCancel:i}}const ye={class:"flex"},ke={class:"w-[400px]"},ge={key:1},xe=$({__name:"index",setup(e){const{editMap:l,columns:c,dataList:m,onEdit:o,onSave:i,onCancel:t}=he();return(v,u)=>{const s=r("el-scrollbar"),a=r("el-button"),f=r("pure-table");return _(),h("div",ye,[n(s,null,{default:p(()=>[b("code",null,[b("pre",ke," "+M(d(m)),1)])]),_:1}),n(f,{"row-key":"id","align-whole":"center","header-cell-style":{background:"var(--el-fill-color-light)",color:"var(--el-text-color-primary)"},data:d(m),columns:d(c)},{operation:p(({row:x,index:C})=>{var E;return[(E=d(l)[C])!=null&&E.editable?(_(),h("div",ge,[n(a,{class:"reset-margin",link:"",type:"primary",onClick:z=>d(i)(C)},{default:p(()=>[...u[1]||(u[1]=[y(" 保存 ",-1)])]),_:1},8,["onClick"]),n(a,{class:"reset-margin",link:"",onClick:z=>d(t)(C)},{default:p(()=>[...u[2]||(u[2]=[y(" 取消 ",-1)])]),_:1},8,["onClick"])])):(_(),V(a,{key:0,class:"reset-margin",link:"",type:"primary",onClick:z=>d(o)(x,C)},{default:p(()=>[...u[0]||(u[0]=[y(" 修改 ",-1)])]),_:1},8,["onClick"]))]}),_:1},8,["data","columns"])])}}}),Ce={viewBox:"0 0 1024 1024",width:"1em",height:"1em"};function Ve(e,l){return _(),h("svg",Ce,[...l[0]||(l[0]=[b("path",{fill:"currentColor",d:"m199.04 672.64l193.984 112l224-387.968l-193.92-112l-224 388.032zm-23.872 60.16l32.896 148.288l144.896-45.696zM455.04 229.248l193.92 112l56.704-98.112l-193.984-112zM104.32 708.8l384-665.024l304.768 175.936L409.152 884.8h.064l-248.448 78.336zm384 254.272v-64h448v64z"},null,-1)])])}const $e=B({name:"ep-edit-pen",render:Ve});function Me(){const e=k({}),l=k(-1),c=k(le),m=j(()=>s=>{var a;return(a=e.value[s])==null?void 0:a.editing}),o=j(()=>(s,a=!1)=>["cursor-pointer","ml-2","transition","delay-100",a?["hover:scale-110","hover:text-red-500"]:m.value(s)&&["scale-150","text-red-500"]]),i=[{label:"姓名（可修改）",prop:"name",cellRenderer:({row:s,index:a})=>n("div",{class:"flex-bc w-full h-[32px]",onMouseenter:()=>l.value=a,onMouseleave:()=>t(a)},[m.value(a)?n(g,null,[n(r("el-input"),{modelValue:s.name,"onUpdate:modelValue":f=>s.name=f},null),n(r("iconify-icon-offline"),{icon:Z,class:o.value(a),onClick:()=>u(a)},null)]):n("p",null,[s.name]),O(n(r("iconify-icon-offline"),{icon:$e,class:o.value(a,!0),onClick:()=>v(s,a)},null),[[X,l.value===a&&!m.value(a)]])])},{label:"地址",prop:"address"}];function t(s){m.value[s]?l.value=s:l.value=-1}function v(s,a){e.value[a]=Object.assign(D(w({},s),{editing:!0}))}function u(s){e.value[s].editing=!1}return{columns:i,dataList:c}}const we={class:"flex"},De={class:"w-[400px]"},Le=$({__name:"index",setup(e){const{columns:l,dataList:c}=Me();return(m,o)=>{const i=r("el-scrollbar"),t=r("pure-table");return _(),h("div",we,[n(i,null,{default:p(()=>[b("code",null,[b("pre",De," "+M(d(c)),1)])]),_:1}),n(t,{class:"w-[30vw]!","row-key":"id",border:"",data:d(c),columns:d(l)},null,8,["data","columns"])])}}}),L=e=>`代码位置：src/views/table/edit/${e}/index.vue`,Ye=[{key:"demo1",content:L("demo1"),title:"整体编辑",component:be},{key:"demo2",content:L("demo2"),title:"单行编辑",component:xe},{key:"demo3",content:L("demo3"),title:"单元格编辑",component:Le}],Be={class:"card-header"},Ee={class:"font-medium"},ze=$({name:"PureTableEdit",__name:"edit",setup(e){const l=k(0);function c({index:m}){l.value=m}return(m,o)=>{const i=r("el-link"),t=r("el-alert"),v=r("el-tab-pane"),u=r("el-tabs"),s=r("el-card"),a=Q("tippy");return _(),V(s,{shadow:"never"},{header:p(()=>[b("div",Be,[b("span",Ee,[o[1]||(o[1]=y(" 可编辑用法全部采用 TSX 语法，充分发挥 ",-1)),n(i,{href:"https://github.com/pure-admin/pure-admin-table",target:"_blank",style:{margin:"0 4px 5px","font-size":"16px"}},{default:p(()=>[...o[0]||(o[0]=[y(" @pureadmin/table ",-1)])]),_:1}),o[2]||(o[2]=y(" 的灵活性，维护整体表格只需操作 columns 配置即可 ",-1))])]),n(i,{class:"mt-2",href:"https://github.com/pure-admin/vue-pure-admin/blob/main/src/views/table/edit",target:"_blank"},{default:p(()=>[...o[3]||(o[3]=[y(" 代码位置 src/views/table/edit ",-1)])]),_:1})]),default:p(()=>[n(t,{title:`可编辑用法中所有表格都设置了 row-key ，它是唯一值的字段，比如id。作用：1. 用来优化 Table\r
      的渲染，尤其当字段在深层结构中；2. 防止拖拽后表格组件内部混乱（拖拽必须设置）`,type:"info",closable:!1}),n(u,{onTabClick:c},{default:p(()=>[(_(!0),h(g,null,q(d(Ye),(f,x)=>(_(),V(v,{key:f.key,lazy:!0},{label:p(()=>[O((_(),h("span",null,[y(M(f.title),1)])),[[a,{maxWidth:"none",content:`（第 ${x+1} 个示例）${f.content}`}]])]),default:p(()=>[l.value==x?(_(),V(K(f.component),{key:0})):G("",!0)]),_:2},1024))),128))]),_:1})]),_:1})}}}),He=U(ze,[["__scopeId","data-v-6b514e2a"]]);export{He as default};
